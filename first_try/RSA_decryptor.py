dict_alphabet_rus_en = {100: '!', 101: '"', 102: '#', 103: '$', 104: '%', 105: '&', 106: "'", 107: '(',
                        108: ')', 109: '*', 110: '+', 111: ',', 112: '-', 113: '.', 114: '/', 115: '0',
                        116: '1', 117: '2', 118: '3', 119: '4', 120: '5', 121: '6', 122: '7', 123: '8',
                        124: '9', 125: ':', 126: ';', 127: '<', 128: '=', 129: '>', 130: '?', 131: '@',
                        132: 'A', 133: 'B', 134: 'C', 135: 'D', 136: 'E', 137: 'F', 138: 'G', 139: 'H',
                        140: 'I', 141: 'J', 142: 'K', 143: 'L', 144: 'M', 145: 'N', 146: 'O', 147: 'P',
                        148: 'Q', 149: 'R', 150: 'S', 151: 'T', 152: 'U', 153: 'V', 154: 'W', 155: 'X',
                        156: 'Y', 157: 'Z', 158: '[', 159: '\\', 160: ']', 161: '^', 162: '_', 163: '`',
                        164: 'a', 165: 'b', 166: 'c', 167: 'd', 168: 'e', 169: 'f', 170: 'g', 171: 'h',
                        172: 'i', 173: 'j', 174: 'k', 175: 'l', 176: 'm', 177: 'n', 178: 'o', 179: 'p',
                        180: 'q', 181: 'r', 182: 's', 183: 't', 184: 'u', 185: 'v', 186: 'w', 187: 'x',
                        188: 'y', 189: 'z', 190: '{', 191: '|', 192: '}', 193: 'А', 194: 'Б', 195: 'В',
                        196: 'Г', 197: 'Д', 198: 'Е', 199: 'Ж', 200: 'З', 201: 'И', 202: 'Й', 203: 'К',
                        204: 'Л', 205: 'М', 206: 'Н', 207: 'О', 208: 'П', 209: 'Р', 210: 'С', 211: 'Т',
                        212: 'У', 213: 'Ф', 214: 'Х', 215: 'Ц', 216: 'Ч', 217: 'Ш', 218: 'Щ', 219: 'Ъ',
                        220: 'Ы', 221: 'Ь', 222: 'Э', 223: 'Ю', 224: 'Я', 225: 'а', 226: 'б', 227: 'в',
                        228: 'г', 229: 'д', 230: 'е', 231: 'ж', 232: 'з', 233: 'и', 234: 'й', 235: 'к',
                        236: 'л', 237: 'м', 238: 'н', 239: 'о', 240: 'п', 241: 'р', 242: 'с', 243: 'т',
                        244: 'у', 245: 'ф', 246: 'х', 247: 'ц', 248: 'ч', 249: 'ш', 250: 'щ', 251: 'ъ',
                        252: 'ы', 253: 'ь', 254: 'э', 255: 'ю', 256: 'я', 257: ' ', 258: '–', 259: '‘',
                        260: '’', 261: '“', 262: '”'}


def decryption(rsa_key, text, save_address):
    key_array = rsa_key.split(",")
    mod = int(key_array[0])
    d = 0
    if key_array[1][0] == '1':
        d = mod - int(key_array[1][1:])
    elif key_array[1][0] == '0':
        d = mod + int(key_array[1][1:])

    mass = [a for a in text.split(" ")]

    array = []

    for elem in mass:
        array.append(str(pow(int(elem), d, mod))[1:])

    text = "".join(array)

    mass_block = []
    i = 0
    while i < len(text):
        mass_block.append(dict_alphabet_rus_en.get(int(text[i: i + 3])))
        i += 3

    file = open(save_address, 'w')
    file.write("".join(mass_block))
    file.close()

    return 'finish'

